<div *ngIf="showLoader" class="loader-loops">
  Cargando libros...
  <app-loader *ngIf="loader.show" [mode]="loader.mode"></app-loader>
</div>

<ngu-carousel *ngIf="showBooks && books.length > 0" [inputs]="carouselOne" [dataSource]="books" (carouselLoad)="myfunc($event)">
    <ngu-item class="item" NguCarouselItem *nguCarouselDef="let b;">
      <div class="content">
        <!--Book principal image-->
        <a routerLink="/libro/{{b.slug}}" class="contain-img">
          <!--Show if b images exists-->
          <img *ngIf="b.image !== undefined" src="{{b.image}}" alt="">
          
          <img *ngIf="b.image === undefined || b.image == ''" src="assets/img/common/no-image.jpg" alt="">
        </a>
  
        <div class="info">
          <!--b Name-->
          <h3 class="name">
            <!--If name is more than 40 words-->
            <a *ngIf="b.title.length >= 40" matTooltip="{{b.title}}" [matTooltipPosition]="tooltipPosition" routerLink="/libro/{{b.slug}}">{{b.title | slice:0:40}}...</a>

            <!--If name is minor than 40 words-->
            <a *ngIf="b.title.length < 40" matTooltip="{{b.title}}" [matTooltipPosition]="tooltipPosition" routerLink="/libro/{{b.slug}}">{{b.title}}</a>
          </h3>
  
          <!--REPLACE WHEN CHANGE bS MODEL-->
          <p class="authors">
            <span *ngFor="let author of b.author; let i = index;">
              <a *ngIf="i < 5" routerLink="/autor/{{author.slug}}">{{author.name}}
                <span *ngIf="i < 3 && b.author.length > 2">-</span>
                <span *ngIf="i == 4 && b.author.length > 4">...</span>
              </a>
            </span>
          </p>
  
          <ng-template ngFor let-country [ngForOf]="b.countries">
            <!--b actions-->
            <div *ngIf="country.name === currentCountry && country.price > 0 && pageType != 'news'" class="actions">
  
              <!--b Price-->
              <p class="price">{{ country.price | currency:'COP':'symbol-narrow':'4.0-0' | replaceCurrencySeparator:',':'.' }}</p>
    
              <!--b buttons-->
              <p class="btns">
                <a class="cart-btn" matTooltip="Añadir al carrito" [matTooltipPosition]="tooltipPosition" (click)="addToCart(b, country.price)">
                  <i class="material-icons">add_shopping_cart</i>
                </a>
                <a class="hearth-btn" matTooltip="Añadir a mi lista de deseos" [matTooltipPosition]="tooltipPosition" (click)="addToWishlist(b)">
                  <i class="material-icons">favorite_border</i>
                </a>
              </p>
            </div>
          </ng-template>

          <div *ngIf="pageType === 'news'" class="reservations">
            <p class="disponibility">Disponible a partir de: <b>12 de Nov, 2018</b></p>
            <a class="button primary">Reservar</a>
          </div>
  
        </div>
      </div>
    </ngu-item>
    <button NguCarouselPrev class='leftRs'></button>
    <button NguCarouselNext class='rightRs'></button>
</ngu-carousel>
  
<div *ngIf="error.show" class="loader-loops">
  <p>{{error.msg}}</p>
</div>